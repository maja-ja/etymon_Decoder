# Etymon Decoder 项目说明文档

本项目是一个基于 **Streamlit** 开发的英语词根学习工具。核心架构采用 **Google Sheets 云端同步** 机制，并辅以自动化的本地化备援逻辑，为用户提供流畅且稳定的学习体验。

## 核心架构与逻辑

### 1. 云端优先同步逻辑 (Cloud-First Sync)

程序不再依赖预设的静态本地数据库，而是通过以下流程运作：

* **实时读取**：启动时通过 `pandas` 串接 Google Sheets API (CSV 终端)，直接抓取云端最新的单词表。
* **本地缓存与备援**：成功读取后会自动生成/更新 `etymon_database.json` 作为备援缓存。若云端链接失效（如断网），系统将无缝切换至此备援文件。
* **数据结构化**：将扁平的电子表格行（Row）转化为“分类 > 词根组 > 单词”的嵌套层级，以利于高效搜索与展示。

### 2. 数据层级设计 (Data Hierarchy)

数据在程序内部以以下逻辑组织：

* **分类 (Category)**：最高层级，如“高中常见词根”、“医学术语”。
* **词根组 (Root Group)**：包含多个同义词根及其核心意义（如 `vis/vid` 代表“看”）。
* **单词库 (Vocabulary)**：具体的单词内容，包含结构拆解（Breakdown）与定义。

---

## 功能模块说明

### 字根区 (Search Engine)

* **检索逻辑**：支持按分类筛选，并结合实时关键词检索（支持检索单词或词根）。
* **UI 优化**：使用 `st.expander` 折叠显示详细信息，保持界面简洁专业。

### 学习区 (Flashcard Logic)

* **随机算法**：从当前数据库中随机抽样单词进行测验。
* **状态管理**：利用 `st.session_state` 记录题目与卡片翻转状态，防止网页刷新时进度丢失。

### 医学区 (Medical Specialty)

* **自动分流**：系统会自动扫描分类名称，若包含“医学”关键字，将独立展示于此区域，并采用卡片式布局增强阅读体验。

### 管理区 (Admin Logic)

* **数据合并**：提供一键合并功能，可将外部 `pending_data.json` 中的新数据并入数据库。
* **备份导出**：支持将当前数据库还原为 CSV 格式，方便管理员下载后更新回 Google Sheets。

---

## 🛠️ 技术栈 (Technical Stack)

* **前端框架**: Streamlit
* **数据处理**: Pandas, JSON
* **云端驱动**: Google Sheets API (via CSV export)
* **编程语言**: Python 3.13
